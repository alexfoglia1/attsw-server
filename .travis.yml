language: java
  
sudo: required

services:
  - docker

install:
  - docker pull mongo

addons:
  sonarcloud:
    organization: "alexfoglia1"
    token:
      secure: "EkBJz9OLZf1xNGGFgcUAqWUlySOuAA1oHRNYRKxPdA0qOQW+mCaQSoVUVixWt7FmLElz8F5Nn6w7u0o+SU0ThNAvmONBpSgwfz+o8CS9JqkR1IMYKUh1v98qcUPrtQ9bqiut4hMqwrg7ZuivM3aKXb91LwzCslvqxHdqhDbPQDlM5LmtQsW10j0E/aoYRIAjxvdOfDfjTTDkTScrsdFO8r6D0Ev8dPg6y4OmzL7FbDLJx/8JHTwiXfqwp5lXOcNT0XLC/qE2qBNoHqG8dIWpDUuiG1qe3O7sSQD8RNMDjdBkArW7Ctl0aHKHVCvU1aMhPfx/NIexfYcHKVpI8LFtZFgkEJ53PMhS2AE4vhwZrJCr9REspx1sfRIOAdudx5WNNIprd4rp57QkDXcL1zHOW9ZlgKZ6ZRLJmk2Q+3ey84SZcJDv+Y0FgVwlWeA4sq0q6TqCTexs/OXYSUUg4MrqakMXFIxTlJ6dxv5AK5DyOI6AC8UJpYS20/EFqno+URr7OqwX+s4QHLCzjASgOYoDmCG01Apc4i8nKA8ARRTvDUznD3gGToQHOGFfIUgjjoLNgAf8LMFqcp+iFeRfPiJoBYHAdjJZvDzdkT+Ep9omapnafIkWvCfV7gbe3fn6hTaVIyaoo6zd/MaRnVcd15uIqGzMWEcaO78zO+Z9/StVMXE="


script:
  - mvn -f parent/pom.xml clean verify -Pjacoco coveralls:report
  - mvn -f parent/pom.xml clean verify -Pjacoco sonar:sonar
  - mvn -f parent/pom.xml verify -Pfailsafe
 
after_failure:
  - cat /home/travis/build/francescosecci/sp-server-attsw/server/target/surefire-reports/*.txt 

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'


  
