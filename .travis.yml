language: java
  
sudo: required

services:
  - docker

install:
  - docker pull mongo

addons:
  sonarcloud:
    organization: "alexfoglia1-attsw"
    token:
      secure: "EhANCggLF6MPmzk4MzBCrImFMzUVn/kisjw/PkUOFyswsNgSxetmU1WAj2KYo7SQ4QCmB0II/J4HflqzXTNq4Bn7y9+rEZjRV5eZyDZBa84rVijHi2gn5LLwZhORYias54wyl8ywqlHggwdRhhwnuZm8zK52PDSJXskY1R+ITRy53w8OHbsJTIuDWFKHOM/u9ujPh7GuCklEUx+Pospqez417xBzLWrnYvPRomyuo6QLlN9Q3QUnLsMnUJgelud06ZTDDiEsZmb1co856itzl517HefPd5wApSc+tv/NtEJeWLLJJOfSl7dkKno+lAxWWzJPvUHIpxN9WqrJnSeEAJadd5qhzoI6ugCTApwcl7sJ+5YibWrS78DlKb9RgxIQ8viZ+0DzI53pWgQA44MOPwbheht614gNKP9hrdEMCJNs7oYjKDhspXqULHmyXtkScRpwdwtU0+kC5jUIsR7SpfyMGUQsuO0GRQqzRnUljg+W2JpbWVpscdaPGABt/jS/prGzEuTa4Scj42SJqmnskYX2z+iz++9ayNPLQZXlxzSCZJFGsnAGShyHAHzuARmaDx4G6cM6VJRtj99mAySV6qRm54KNo0jHMZY9GGDLxmhROeUZusO3cQ+1mIZbeYTt1pFUnKTlOHTsB337BYNcn1wTUZE7iXwpBRwWrL0vFY8="


env:
  - DISPLAY=:99.0

before_install:
      sh -e /etc/init.d/xvfb start;
    
script:
  - mvn -f parent/pom.xml clean verify -Pjacoco coveralls:report
  - mvn -f client/pom.xml clean verify -Pjacoco sonar:sonar
  - mvn -f parent/pom.xml clean verify -Pfailsafe
 
after_failure:
  - cat /home/travis/build/francescosecci/sp-server-attsw/server/target/surefire-reports/*.txt 

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'


  
